import{f as r}from"./fetch-DEkoyLsj.js";document.addEventListener("DOMContentLoaded",function(){document.getElementById("loginButton").addEventListener("click",function(){document.getElementById("loginDialog").showModal()}),document.querySelector(".loginuser").addEventListener("click",async t=>{t.preventDefault(),console.log("Nyt logataan sisään");const i="https://hyte-servu.northeurope.cloudapp.azure.com/api/auth/login",n=document.querySelector(".login_form"),s={username:n.querySelector("input[name=username]").value,password:n.querySelector("input[name=password]").value},l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};r(i,l).then(e=>{console.log(e),console.log(e.token),localStorage.setItem("token",e.token),e.token===void 0?alert("Unauth user: Käyttäjänimi tai salasana ei oikein"):(alert("Kirjautuminen onnistui."),window.location.href="home.html"),logResponse("loginResponse",`localStorage set with token value: ${e.token}`)})}),document.getElementById("closeDialogButton").addEventListener("click",function(){document.getElementById("loginDialog").close()})});document.addEventListener("DOMContentLoaded",function(){const o=document.getElementById("loginDialog"),t=document.getElementById("register_dialog");document.getElementById("switchToRegister").addEventListener("click",function(){o.close(),t.showModal()}),document.querySelector(".createuser").addEventListener("click",async s=>{s.preventDefault(),console.log("Nyt luodaan käyttäjä");const l="https://hyte-servu.northeurope.cloudapp.azure.com/api/users",e=document.querySelector(".create_user_form");if(!e.checkValidity()){e.reportValidity();return}const c={username:e.querySelector("input[name=username]").value,password:e.querySelector("input[name=password]").value,email:e.querySelector("input[name=email]").value},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)};r(l,a).then(u=>{console.log(u),alert("Rekistöröinti onnistui")}),t.close(),o.showModal()}),document.getElementById("closeRegisterButton").addEventListener("click",function(){document.getElementById("register_dialog").close(),document.getElementById("loginDialog").showModal()})});
