import{f as r}from"./fetch-DEkoyLsj.js";document.addEventListener("DOMContentLoaded",function(){const o=document.createElement("img");o.src="./taustakuva6.jpg";const n=document.querySelector("h3");n.parentNode.insertBefore(o,n),document.getElementById("loginButton").addEventListener("click",function(){document.getElementById("loginDialog").showModal()}),document.querySelector(".loginuser").addEventListener("click",async l=>{l.preventDefault(),console.log("Nyt logataan sisään");const i="http://127.0.0.1:3000/api/auth/login",s=document.querySelector(".login_form"),e={username:s.querySelector("input[name=username]").value,password:s.querySelector("input[name=password]").value},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};r(i,c).then(t=>{console.log(t),console.log(t.token),localStorage.setItem("token",t.token),t.token===void 0?alert("Unauth user: Käyttäjänimi tai salasana ei oikein"):(alert("Kirjautuminen onnistui."),window.location.href="home.html"),logResponse("loginResponse",`localStorage set with token value: ${t.token}`)})}),document.getElementById("closeDialogButton").addEventListener("click",function(){document.getElementById("loginDialog").close()})});document.addEventListener("DOMContentLoaded",function(){const o=document.getElementById("loginDialog"),n=document.getElementById("register_dialog");document.getElementById("switchToRegister").addEventListener("click",function(){o.close(),n.showModal()}),document.querySelector(".createuser").addEventListener("click",async i=>{i.preventDefault(),console.log("Nyt luodaan käyttäjä");const s="http://127.0.0.1:3000/api/users",e=document.querySelector(".create_user_form");if(!e.checkValidity()){e.reportValidity();return}const t={username:e.querySelector("input[name=username]").value,password:e.querySelector("input[name=password]").value,email:e.querySelector("input[name=email]").value},u={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};r(s,u).then(d=>{console.log(d),alert("Rekistöröinti onnistui")}),n.close(),o.showModal()}),document.getElementById("closeRegisterButton").addEventListener("click",function(){document.getElementById("register_dialog").close(),document.getElementById("loginDialog").showModal()})});
