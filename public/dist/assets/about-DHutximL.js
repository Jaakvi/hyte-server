import{f as m}from"./fetch-DEkoyLsj.js";async function d(){console.log("Haetaan käyttäjän tiedot");const t="https://hyte-servu.northeurope.cloudapp.azure.com/api/auth/me",r={method:"GET",headers:{Authorization:"Bearer: "+localStorage.getItem("token")}};m(t,r).then(e=>{console.log(e),document.getElementById("name").innerHTML=e.user.username})}function p(t){const o=new Date(t),r=o.getDate().toString().padStart(2,"0"),e=(o.getMonth()+1).toString().padStart(2,"0"),c=o.getFullYear();return`${r}.${e}.${c}`}document.querySelector(".user_info").addEventListener("click",h);async function h(){const t="https://hyte-servu.northeurope.cloudapp.azure.com/api/auth/me",r={method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("token")}};m(t,r).then(e=>{console.log(e);const c=p(e.user.created_at),n=e.user.username,a=e.user.email,l=e.user.user_level;g(c,n,a,l)}).catch(e=>{console.error("Error:",e)})}function g(t,o,r,e){const c=document.getElementById("information"),n=document.getElementById("userinfo");n.innerHTML="";const a=document.createElement("h4"),l=document.createElement("p"),s=document.createElement("p"),i=document.createElement("p"),u=document.createElement("p");a.textContent="User information: ",l.textContent="User created: "+t,s.textContent="Username: "+o,i.textContent="Email: "+r,u.textContent="User level: "+e,n.appendChild(a),n.appendChild(l),n.appendChild(s),n.appendChild(i),n.appendChild(u),c.showModal()}document.getElementById("closeInfo").addEventListener("click",function(){document.getElementById("information").close()});document.querySelector(".logout").addEventListener("click",f);function f(t){t.preventDefault(),localStorage.removeItem("token"),console.log("logginout"),window.location.replace("index.html")}d();
