import{f as i}from"./fetch-DEkoyLsj.js";async function u(){console.log("Haetaan käyttäjän tiedot");const t="https://hyte-servu.northeurope.cloudapp.azure.com/api/auth/me",o={method:"GET",headers:{Authorization:"Bearer: "+localStorage.getItem("token")}};i(t,o).then(e=>{console.log(e),document.getElementById("name").innerHTML=e.user.username})}document.querySelector(".user_info").addEventListener("click",m);async function m(){const t="https://hyte-servu.northeurope.cloudapp.azure.com/api/auth/me",o={method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("token")}};i(t,o).then(e=>{console.log(e);const n=e.user.username,r=e.user.email,c=e.user.user_level;d(n,r,c)}).catch(e=>{console.error("Error:",e)})}function d(t,l,o){const e=document.getElementById("information"),n=document.getElementById("userinfo");n.innerHTML="";const r=document.createElement("h4"),c=document.createElement("p"),a=document.createElement("p"),s=document.createElement("p");r.textContent="User information: ",c.textContent="Username: "+t,a.textContent="Email: "+l,s.textContent="User level: "+o,n.appendChild(r),n.appendChild(c),n.appendChild(a),n.appendChild(s),e.showModal()}document.getElementById("closeInfo").addEventListener("click",function(){document.getElementById("information").close()});document.querySelector(".logout").addEventListener("click",p);function p(t){t.preventDefault(),localStorage.removeItem("token"),console.log("logginout"),window.location.replace("index.html")}u();
